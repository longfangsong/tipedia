[{"name":"PD 依赖 etcd","tags":["PD","etcd"],"aliases":[],"category":"design-idea","content_for_search":"PD 依赖 etcd原因主要有：简单方便稳定社区支持TiKV/TiDB 本身目前不具备一部分 etcd 的功能，如 lease/watchLinksTwitter 上的讨论（评论区捕捉 CTO）","path":"why%2Fpd-on-etcd.htmlpart"},{"name":"在 TiDB 中新建一张 infoschema 表","tags":["TiDB","SQL"],"aliases":[],"category":"handbook","content_for_search":"在 TiDB 中新建一张 infoschema 表在 tidb 仓库的 ，向文件一开始那个大  的最后添加一条 在下面的  里为他添加一个 在下面的  里面添加这个表的  定义在下面的  里面添加  到  的映射在 ，为 ，添加一个 ，这个函数的主要用途就是把数据转成  的样子然后放在  的  里面，这里数据从哪里来我就不管了，你自己决定。然后在  里的大  里面加一个 ， 的键就是你在 1. 中写的那个 ，行为就是 。在  中的  里的  里的那个  里面，加上对应的 ，一般在最长的那坨  最后加一条  就行注：如果希望某个表有全集群和单个 TiDB server 节点两个版本，只需在  注册单 server 表对应的全集群版本：，然后和对应单机表一起进行 6. 和 7. 两步操作即可。","path":"how%2FAddInfoTable.htmlpart"},{"name":"启用 Golang 代码中的某个 FailPoint","tags":["Golang","FailPoint","test"],"aliases":[],"category":"handbook","content_for_search":"启用 Golang 代码中的某个 FailPoint使用  使能对应的 ，并传入对应 expression 控制行为即可。详见官博文章。Links官博文章","path":"How%2F%E5%90%AF%E7%94%A8%20Golang%20%E4%BB%A3%E7%A0%81%E4%B8%AD%E7%9A%84%E6%9F%90%E4%B8%AA%20FailPoint%20.htmlpart"},{"name":"AmendSchema","tags":["TiDB","txn"],"aliases":["amend"],"category":"concept","content_for_search":"AmendSchema当有并发进行的DDL时，事务可以自动修改其mutation以减少 commit 失败的情况。Links代码代码","path":"what%2FAmendSchema.htmlpart"},{"name":"LockManager","tags":["transaction","TiKV","Lock"],"aliases":[],"category":"concept","content_for_search":"LockManagerTiKV中用于管理悲观锁的组件。辨析WaiterManager vs LockManager: WaiterManager 是 LockManager 的一部分，LockManager 同时还有另一部分 Detector 负责进行死锁检测。Links代码","path":"what%2FLockManager.htmlpart"},{"name":"Detector","tags":["TiKV","sig/txn"],"aliases":[],"category":"concept","content_for_search":"Detector死锁检测器。Links代码","path":"what%2FDetector.htmlpart"},{"name":"compation","tags":["TiKV","sig/storage"],"aliases":[],"category":"concept","content_for_search":"compation将LSM Tree中的小SST文件合并成一个大的SST文件。Links文档","path":"what%2FCompation.htmlpart"},{"name":"min_commit_ts","tags":["TiKV","sig/txn","largeTxn","asyncCommit"],"aliases":[],"category":"concept","content_for_search":"min_commit_ts 指事务预期最早被提交的时间戳，在两个场合被使用：大事务中的  在事务开始时设置为该事务（设其为事务 A）的  + 1。当其他事务（设其为事务 B）试图读事务 A “锁住”的 key 时，会将事务 A 的  推进为事务 B 自身的 + 1，来强迫系统使得自己看不到事务 A 的结果。可以看作是事务 A rebase 到了事务 B 上面。async commit 中的 在使用了 async commit 的事务处理过程中，TiKV 会在对每个 Prewrite 请求持久化时，将本地所“看见”到过最大的时间戳作为  一起持久化下去，并返回给 TiDB。对于 TiDB，实际用于提交的 。Links大事务文档async commit文档Prewrite Result 中的 ","path":"what%2Fmin_commit_ts.htmlpart"},{"name":"ordinary","tags":["PD","sig/scheduling"],"aliases":[],"category":"concept","content_for_search":"ordinary在 PD 中，一般认为 TiKV 所对应的 Engine/Store 是 ordinary 的，相对的，TiFlash 对应的Engine/Store 是 special 的。太史公曰这是 engine 歧视！TiFlash Lives Matter！😏","path":"what%2Fordinary.htmlpart"},{"name":"CIStr","tags":["TiDB"],"aliases":[],"category":"concept","content_for_search":"CIStr大小写无关字符串。Links代码","path":"what%2FCIStr.htmlpart"},{"name":"ConcurrencyManager","tags":["TiKV"],"aliases":["cm"],"category":"concept","content_for_search":"ConcurrencyManagerTiKV 中用于并发控制和内存锁管理的结构。Links代码","path":"what%2FConcurrencyManager.htmlpart"},{"name":"kvproto","tags":[],"aliases":[],"category":"project","content_for_search":"kvprotoTiKV 使用的 protobuf 文件仓库。Links项目仓库","path":"what%2Fkvproto.htmlpart"},{"name":"聚簇索引","tags":["TiDB"],"aliases":["Cluster Index"],"category":"feature","content_for_search":"聚簇索引即数据行和索引存储在一起，在实现这个 feature 之前，TiDB 只能在单列 INTEGER/BIGINT 主键上启用聚簇索引。而实现这个 feature 之后，要求放宽到支持使用任意主键作为聚簇索引。Links使用文档Proposal","path":"what%2F%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95.htmlpart"},{"name":"Filter","tags":["PD","sig/scheduling"],"aliases":[],"category":"concept","content_for_search":"FilterFilter 指一种用于筛选调度过程中 能作为源/目标 store 的 store 的对象。Links代码","path":"what%2FFilter.htmlpart"},{"name":"Peer","tags":["TiKV","PD","sig/scheduling"],"aliases":[],"category":"concept","content_for_search":"Peer同一个 Raft Group 中, replica 之间互称 peer。Links文档","path":"what%2FPeer.htmlpart"},{"name":"distinctScoreFilter","tags":["pd","sig/scheduling"],"aliases":["distinct-filter"],"category":"concept","content_for_search":"distinctScoreFilterdistinctScoreFilter保证distinct score不会下降。Links代码","path":"what%2FdistinctScoreFilter.htmlpart"},{"name":"Protected Rollback","tags":[],"aliases":[],"category":"词条类型，比如 concept, component, config-item 等等","content_for_search":"Protected Rollback在引入了 Collapse Rollback 和悲观事务后，某个事务的 primary key 上的 rollback 记录可能会被 collapse 掉了，造成这个事务的 secondary keys 被意外提交。为了避免这个情况，我们把这些悲观事务的 primary key 上的 rollback 记录标记为 protected，不 collapse 他们。Links引入的 PR","path":"what%2FProtected%20Rollback.htmlpart"},{"name":"Completion Queue","tags":["grpc"],"aliases":["cq"],"category":"concept","content_for_search":"Completion QueuegRPC 用于缓存事件（如rpc请求）的组件，用于流控等。Links代码官方C++实现文档","path":"what%2FCompletion%20Queue.htmlpart"},{"name":"TiPB","tags":["TiDB","protobuf","grpc"],"aliases":[],"category":"project","content_for_search":"TiPBTiDB 的 protobuf 文件所在的仓库。辨析tipb vs kvproto: 请注意 TiKV 是可以脱离 TiDB 独立运行的 kv 数据库，kvproto 是 TiKV  的 protobuf 定义。Links仓库地址","path":"what%2FTiPB.htmlpart"},{"name":"Green GC","tags":[],"aliases":[],"category":"feature","content_for_search":"Green GC使得GC过程中可以跳过 raft 层直接resolve lock。Links文档","path":"what%2FGreen%20GC.htmlpart"},{"name":"Region","tags":["TiKV","PD","sig/scheduling"],"aliases":["Tablet (Spanner，YugabyteDB)","Range (CRDB)","Raft group"],"category":"concept","content_for_search":"Region保存的所有数据中的一部分，这一部分数据作为一个raft group储存在一起。Links文档Protobuf","path":"what%2FRegion.htmlpart"},{"name":"location-labels","tags":["PD"],"aliases":[],"category":"config-item","content_for_search":"location-labels表示TiKV集群拓扑结构的label。Links文档配置文件示例","path":"what%2Flocation-labels.htmlpart"},{"name":"General Availability","tags":[],"aliases":["GA"],"category":"concept","content_for_search":"General Availability我们平常说的某个 Feature GA，就是说这个 Feature 已经可以正式发布可用了。","path":"what%2FGeneral%20Availability.htmlpart"},{"name":"Datum","tags":["TiDB"],"aliases":[],"category":"concept","content_for_search":"DatumA data box holds different kinds of data，有点像 Rust 中的 enum。常用于 TiDB 表中某个 Cell 的数据源。Links代码","path":"what%2FDatum.htmlpart"},{"name":"Collapse Rollback","tags":["TiKV","sig/txn"],"aliases":[],"category":"optimize","content_for_search":"Collapse Rollback如果一个 key 被连续多次 rollback，我们可以将这些 rollback 合并，只保留最后一个 rollback。以免  column family 的大量数据拖慢读取。Links带入这个优化的pr太史公曰如果是我来做而且知道后面会引发那么多麻烦的话，我宁可不要这个优化 （❌（其实和后面做 Feature 的方式可能也有关系吧…… 太难了.jpg）","path":"what%2FCollapse%20Rollback.htmlpart"},{"name":"大沽路宪法","tags":["搞笑"],"aliases":[],"category":"concept","content_for_search":"大沽路宪法PingCAP 上海办公室的行为守则。LinksRepo","path":"what%2F%E5%A4%A7%E6%B2%BD%E8%B7%AF%E5%AE%AA%E6%B3%95.htmlpart"},{"name":"WaiterManager","tags":["TiKV"],"aliases":[],"category":"concept","content_for_search":"WaiterManager处理等待悲观锁的事务的等待与唤醒。辨析WaiterManager vs LockManager: WaiterManager 是 LockManager 的一部分，LockManager 同时还有另一部分 Detector 负责进行死锁检测。Links代码","path":"what%2FWaiterManager.htmlpart"},{"name":"Context","tags":["TiKV"],"aliases":[],"category":"concept","content_for_search":"ContextTiKV 请求上附加的一些不属于请求本身的必要信息，包括 region 信息，隔离级别等。LinksProtobuf","path":"what%2FContext.htmlpart"}]